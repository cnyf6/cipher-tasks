# 用户操作指南 - 保密自由职业者支付平台

欢迎使用保密自由职业者支付平台！本指南将帮助您了解如何使用基于全同态加密（FHE）技术的加密代币系统。

## 目录

1. [快速开始](#快速开始)
2. [准备工作](#准备工作)
3. [连接钱包](#连接钱包)
4. [使用代币页面](#使用代币页面)
5. [转账操作](#转账操作)
6. [查询余额](#查询余额)
7. [常见问题处理](#常见问题处理)
8. [安全与隐私](#安全与隐私)
9. [常见问答](#常见问答)

---

## 快速开始

保密自由职业者支付平台允许您在以太坊 Sepolia 测试网上发送和接收加密代币。所有交易金额都通过 FHE 技术加密，确保完全的隐私保护。

**平台地址**: https://cipher-tasks-main-pj1e4s5we-cys-projects-f19e6212.vercel.app

---

## 准备工作

使用平台前，您需要准备：

### 1. MetaMask 钱包
- **安装 MetaMask**: 从 [metamask.io](https://metamask.io) 下载
- 支持 Chrome、Firefox、Edge 浏览器及移动设备
- 创建新钱包或导入现有钱包

### 2. Sepolia 测试网 ETH
您需要 Sepolia ETH 来支付 Gas 费用。可从以下水龙头免费获取：
- [Alchemy Sepolia 水龙头](https://sepoliafaucet.com/)
- [Infura Sepolia 水龙头](https://www.infura.io/faucet/sepolia)
- [Google Cloud Sepolia 水龙头](https://cloud.google.com/application/web3/faucet/ethereum/sepolia)

**所需数量**: 约 0.01 ETH 可进行多次交易

### 3. 现代浏览器
- Chrome（推荐）
- Firefox
- Edge
- Brave

**注意**: 您的浏览器必须支持 WebAssembly（所有现代浏览器都支持）

---

## 连接钱包

### 步骤 1: 进入代币页面

1. 访问平台首页
2. 点击导航菜单中的 **"Token"**
3. 或直接访问 `/token` 路径

### 步骤 2: 连接 MetaMask

1. 点击 **"Connect Wallet"** 按钮
2. MetaMask 会自动打开
3. 选择您要连接的账户
4. 点击 **"Next"** 然后点击 **"Connect"**

### 步骤 3: 切换到 Sepolia 网络

如果您不在 Sepolia 网络：

1. MetaMask 会提示您切换网络
2. 点击 **"Switch Network"**
3. 确认网络切换

**手动切换网络**:
- 打开 MetaMask
- 点击顶部的网络下拉菜单
- 选择 **"Sepolia test network"**

**网络详情**:
- 网络名称: Sepolia
- 链 ID: 11155111
- RPC URL: https://ethereum-sepolia-rpc.publicnode.com
- 货币符号: ETH
- 区块浏览器: https://sepolia.etherscan.io

---

## 使用代币页面

代币页面包含两个主要部分：

### 1. 转账功能（左侧面板）
向其他地址发送加密代币

### 2. 余额查询（右侧面板）
查看您的加密代币余额

---

## 转账操作

### 详细转账流程

#### 1. 输入接收地址
```
接收地址: 0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb0
```
- 必须是有效的以太坊地址（以 `0x` 开头）
- 格式: 42 个字符（0x + 40 位十六进制字符）
- 示例: `0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb0`

**提示**:
- 复制粘贴地址以避免输入错误
- 发送前仔细核对地址
- 可以向自己的地址发送以测试功能

#### 2. 输入金额
```
金额: 100
```
- 输入要发送的代币数量
- 必须是正数
- 支持小数（如 10.5）
- 单位: 完整代币单位（内部使用 18 位小数）

**重要**: 确保您有足够的余额！

#### 3. 点击 "Transfer"

1. 点击 **"Transfer"** 按钮
2. 等待 FHE 加密（可能需要 5-10 秒）
3. MetaMask 会打开并显示交易详情

#### 4. 在 MetaMask 中确认

**交易详情**:
- **发送至**: 合约地址 (0xfA69b59E6F4895429e291Fd5ABf522812B40AA22)
- **Gas 费**: 约 0.001-0.003 ETH
- **数据**: 加密的交易数据

**操作**: 在 MetaMask 中点击 **"Confirm"**

#### 5. 等待确认

- 处理时间: 15-30 秒
- 会显示加载指示器
- 完成后显示成功消息

**成功消息**:
```
✅ 转账成功！
交易已在 Sepolia 网络确认
```

#### 6. 在区块浏览器验证

点击交易链接在 Etherscan 上查看：
```
https://sepolia.etherscan.io/tx/0x...
```

**您将看到**:
- 交易哈希
- 区块高度
- 使用的 Gas
- 状态: 成功 ✅
- **注意**: 金额是加密的，在浏览器上不可见！

---

## 查询余额

### 详细余额查询流程

#### 1. 点击 "Get Balance" 按钮

位于代币页面的右侧面板

#### 2. 请求访问权限

仅首次需要：
- MetaMask 打开 "Request Balance Access" 交易
- 这会授予您解密余额的权限
- Gas 费用: 约 0.0005 ETH
- 点击 **"Confirm"**

#### 3. 签署解密请求

MetaMask 会要求签名：
- 这会创建一个授权签名
- **不需要 Gas 费用**
- 点击 **"Sign"**

**签名消息详情**:
```
用户解密请求验证
合约: 0xfA69...
有效期: 1 天
```

#### 4. 解密过程

- FHE 系统解密您的余额
- 处理时间: 5-15 秒
- 您的余额在客户端解密（安全！）

#### 5. 查看余额

您的余额会显示在页面上：
```
您的余额: 1,000,000 代币
```

**余额显示**:
- 显示完整代币单位
- 自动添加千位分隔符
- 再次点击 "Get Balance" 可刷新

---

## 常见问题处理

### 常见问题及解决方案

#### ❌ "未安装 MetaMask"

**解决方案**:
1. 从 [metamask.io](https://metamask.io) 安装 MetaMask
2. 刷新页面
3. 重新尝试连接

---

#### ❌ "请切换到 Sepolia 网络"

**解决方案**:
1. 打开 MetaMask
2. 点击网络下拉菜单
3. 选择 "Sepolia test network"
4. 如果列表中没有 Sepolia，手动添加：
   - 网络名称: Sepolia
   - RPC URL: https://ethereum-sepolia-rpc.publicnode.com
   - 链 ID: 11155111
   - 货币: ETH

---

#### ❌ "FHE 初始化失败: 超时"

**解决方案**:
1. 刷新页面（Ctrl+F5 或 Cmd+Shift+R）
2. 清除浏览器缓存
3. 检查网络连接
4. 尝试其他浏览器
5. 临时禁用浏览器扩展

---

#### ❌ "交易资金不足"

**解决方案**:
1. 在 MetaMask 中检查您的 Sepolia ETH 余额
2. 从水龙头获取免费测试网 ETH：
   - https://sepoliafaucet.com/
   - https://www.infura.io/faucet/sepolia
3. 等待水龙头交易完成（约 30 秒）
4. 重新尝试交易

---

#### ❌ "用户拒绝交易"

**原因**: 您在 MetaMask 中点击了 "Reject"

**解决方案**:
1. 再次点击转账/余额按钮
2. 这次在 MetaMask 中点击 "Confirm"

---

#### ❌ "无效的接收地址"

**解决方案**:
1. 检查地址格式：必须以 `0x` 开头
2. 地址必须是 42 个字符长
3. 复制粘贴地址以避免输入错误
4. 删除任何多余的空格

---

#### ❌ "金额必须是正数"

**解决方案**:
1. 输入大于 0 的数字
2. 不要使用负数
3. 可以使用小数（如 10.5）
4. 不要包含逗号或符号

---

#### ❌ 交易时间过长

**解决方案**:
1. 检查 Sepolia 网络状态: https://sepolia.etherscan.io/
2. 在 Etherscan 上查看您的交易（点击链接）
3. 如果 "Pending" 超过 5 分钟，可能卡住了：
   - 打开 MetaMask
   - 点击 "Activity"
   - 找到该交易
   - 点击 "Speed Up" 或 "Cancel"

---

#### ❌ "解密余额失败"

**解决方案**:
1. 再次请求余额访问权限（第一个按钮）
2. 等待访问交易确认
3. 然后再次尝试 "Get Balance"
4. 确保您签署了解密请求

---

## 安全与隐私

### 什么被加密了？

✅ **加密的（私密）**:
- 转账金额
- 您的代币余额
- 所有交易数值

❌ **未加密的（公开）**:
- 发送者地址
- 接收者地址
- 交易时间戳
- 交易发生的事实

### 隐私如何工作

1. **转账加密**:
   - 金额在您的设备上加密
   - 加密数据发送到区块链
   - 仅授权方可解密

2. **余额解密**:
   - 您的余额以加密形式存储在链上
   - 您请求解密权限
   - 解密在本地进行（安全）

3. **零知识证明**:
   - 证明您有足够的余额
   - 不透露实际金额
   - 基于数学的验证

### 安全最佳实践

✅ **应该做**:
- 妥善保管 MetaMask 助记词
- 发送前验证接收地址
- 使用官方平台 URL
- 在 MetaMask 中检查交易详情
- 保持浏览器更新

❌ **不要做**:
- 分享私钥或助记词
- 连接到未知网站
- 忽略 MetaMask 警告
- 在公共 WiFi 下进行交易
- 相信未经请求的消息

---

## 常见问答

### 一般问题

**问: 这是真钱吗？**
答: 不是，这使用的是 Sepolia 测试网，没有实际价值。仅用于测试和演示。

**问: 可以在以太坊主网使用吗？**
答: 目前仅部署在 Sepolia 测试网。主网部署需要额外的审计和测试。

**问: 需要付费吗？**
答: 您需要 Sepolia 测试网 ETH 支付 Gas 费（可从水龙头免费获取）。代币本身免费用于测试。

**问: 如何获得代币？**
答: 测试目的，您可以从平台管理员请求空投，或从其他用户接收代币。

---

### 隐私问题

**问: 别人能看到我的余额吗？**
答: 不能，您的余额在区块链上是加密的。只有您可以用私钥解密。

**问: 别人能看到我发送了多少吗？**
答: 不能，转账金额是加密的。只有发送者和接收者可以解密数值。

**问: 什么信息是公开的？**
答: 公开信息包括：发送者地址、接收者地址和交易发生的事实。金额是加密的。

**问: 这比普通以太坊更私密吗？**
答: 是的！普通以太坊交易所有金额都公开可见。本平台加密所有数值。

---

### 技术问题

**问: 什么是 FHE？**
答: 全同态加密允许对加密数据进行计算而无需解密。这意味着区块链可以验证交易而无需看到金额。

**问: 为什么加密需要时间？**
答: FHE 加密计算密集。需要 5-10 秒加密数据以获得最大安全性。

**问: 如果加密失败会怎样？**
答: 交易不会发送。您可以刷新页面后重试。

**问: 可以取消交易吗？**
答: 一旦在区块链上确认，交易就是最终的。您可以在 MetaMask 确认前拒绝以阻止发送。

**问: 为什么需要请求余额访问？**
答: 这是一次性权限，允许您解密余额。这是 FHE 系统访问控制所必需的。

---

### 交易问题

**问: 交易需要多长时间？**
答: 典型交易时间：
- 加密: 5-10 秒
- 区块链确认: 15-30 秒
- 总计: 约 30-40 秒

**问: 如果交易失败怎么办？**
答: 查看错误消息，确保有足够的 ETH 支付 Gas，并验证接收地址正确。

**问: 可以一次发送到多个地址吗？**
答: 目前不可以。您需要为每个接收者发送单独的交易。

**问: 有交易限制吗？**
答: 没有硬性限制，但您需要有足够的代币余额和 ETH 支付 Gas。

---

### 钱包问题

**问: 可以使用 WalletConnect 或其他钱包吗？**
答: 目前仅支持 MetaMask。我们可能会在未来添加更多钱包。

**问: 如果我失去 MetaMask 访问权限怎么办？**
答: 如果您有助记词，可以恢复钱包。否则，访问权限将永久丢失。

**问: 可以使用硬件钱包吗？**
答: 可以，如果您的硬件钱包通过 MetaMask 连接。

---

## 支持与资源

### 需要帮助？

- **GitHub Issues**: https://github.com/cnyf6/cipher-tasks/issues
- **文档**: 查看仓库中的 README.md
- **Etherscan**: https://sepolia.etherscan.io/

### 有用链接

- **平台**: https://cipher-tasks-main-pj1e4s5we-cys-projects-f19e6212.vercel.app
- **GitHub**: https://github.com/cnyf6/cipher-tasks
- **MetaMask**: https://metamask.io
- **Sepolia 水龙头**: https://sepoliafaucet.com/
- **Zama FHE**: https://docs.zama.ai/

### 合约信息

- **合约地址**: `0xfA69b59E6F4895429e291Fd5ABf522812B40AA22`
- **网络**: Sepolia 测试网
- **链 ID**: 11155111
- **在 Etherscan 查看**: https://sepolia.etherscan.io/address/0xfA69b59E6F4895429e291Fd5ABf522812B40AA22

---

## 快速参考卡

### 转账代币
```
1. 输入接收地址 (0x...)
2. 输入金额
3. 点击 "Transfer"
4. 在 MetaMask 中确认
5. 等待确认
```

### 查询余额
```
1. 点击 "Get Balance"
2. (首次) 确认访问请求
3. 签署解密请求
4. 查看余额
```

### Gas 费用
```
- 转账: 约 0.001-0.003 ETH
- 余额访问: 约 0.0005 ETH
- 签名: 免费
```

### 网络信息
```
- 网络: Sepolia
- 链 ID: 11155111
- RPC: https://ethereum-sepolia-rpc.publicnode.com
- 浏览器: https://sepolia.etherscan.io
```

---

**最后更新**: 2025-10-28
**版本**: 1.0.0
**平台**: 保密自由职业者支付平台

---

**注意**: 这是测试网演示。交易前请务必确认使用正确的网络！
